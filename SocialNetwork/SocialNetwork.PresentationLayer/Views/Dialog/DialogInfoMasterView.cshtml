@model SocialNetwork.PresentationLayer.Models.DialogInfo

<div class="dialogInfo">  
    <div class="dialogInfo-adminPanel border">
        @using (Html.BeginForm("DialogInfoMasterView", "Dialog", FormMethod.Post))
        {
            <input type="hidden" name="dialogID" value="@Model.ID" />
            <div class="dialogInfo-adminPanel-dialogName">
                <h4>Type new dialog name if you want change it</h4>
                <input type="text" class="form-control" value="@Model.Name" name="dialogName" style="width: 550px;"/> 
                <hr />
            </div>
            <div class="dialogInfo-adminPanel-isReadOnlyRadio">
                <h4>Is read only? Choose another one if you want to change this status</h4  >
                <input type="radio" id="createDialog-isReadOnly-true"
                        name="isReadOnly" value="true" class=".radio-inline" >
                <label for="createDialog-isReadOnly-true" style="margin-right: 10px;">True</label>
                <input type="radio" id="createDialog-isReadOnly-false"
                        name="isReadOnly" value="false" class=".radio-inline">
                <label for="createDialog-isReadOnly-false">False</label>
            </div>
            <input type="submit" value="Change" class="btn btn-default" style="margin-top: 20px; margin-bottom: 8px; margin-left: 25px;"/>    
        }
    </div>
    <div class="dialogInfo-users border">        
        <button onclick="location.href='@Url.Action("DialogPreviews")'" type="button" class="btn btn-default" id="dialogInfo-users-ButtonBack" >Return to dialog</button>
        @foreach(var item in Model.UsersInDialog)
        {
            <div class="dialogInfo-users-UserInfo">
                @if (Model.MasterID == item.ID)
                {
                    <p>@Html.ActionLink(item.FirstName + " " + item.SurName, "Home", "User") (Dialog Master)</p>
                }
                else
                {
                    <a href="/User/UserPage?id=@item.ID"> @item.FirstName @item.SurName</a>
                    <div class="dialogInfo-users-UserInfo-buttons">
                        @using (Html.BeginForm("AppointNewMaster", "User", FormMethod.Post))
                        {
                            <input type="hidden" value="@Model.ID" name="dialogID" />
                            <input type="hidden" value="@item.ID" name="userID" />
                            <input type="submit" value="Appoint new Master" class="btn btn-primary" style="float:left; margin-right: 10px;"/>
                        }                        
                        @using (Html.BeginForm("RemoveFromDialog", "Dialog", FormMethod.Post))
                        {
                            <input type="hidden" value="@Model.ID" name="dialogID" />
                            <input type="hidden" value="@item.ID" name="userID" />
                            <input type="submit" value="Remove From Dialog" class="btn btn-primary" />
                        } 
                    </div>
                }                                             
                <hr />
            </div>                   
        }
    </div>   
</div>

<script type="text/javascript">
    if ('@Model.IsReadOnly' == 'True') {
        $('#createDialog-isReadOnly-true').attr('checked', true);
    }
    else if('@Model.IsReadOnly' == 'False') {
        $('#createDialog-isReadOnly-false').attr('checked', true);
    }
</script>

