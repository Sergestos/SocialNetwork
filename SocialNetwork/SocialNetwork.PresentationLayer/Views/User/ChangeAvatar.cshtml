
@{
    ViewBag.Title = "ChangeAvatar";
}

<div class="setting-avatar">
    @*<div class="setting-avatar-current">
        <h3>This is your current avatar</h3>
        <img class="avatar-image" src="@Url.Action("GetAvatar", "User", new { @ownerID = ViewBag.OwnerID })" width="220" height="220" />
        <hr />
    </div>*@
   @using (Ajax.BeginForm("ChangeAvatar", "User", null, new AjaxOptions { HttpMethod = "POST", UpdateTargetId = "setting-main" }, new { enctype = "multipart/form-data" }))
   {
        @Html.AntiForgeryToken()
        <div class="setting-avatar-new">
            @if (ViewBag.Result != null && ViewBag.Result == "Success")
            {
                <h3 style="color: forestgreen; margin-bottom: 30px;">
                    @ViewBag.Result
                </h3>
            }
            else
            {
                <h3>Choose a picture. It will your avatar</h3>
            }            
            <div>
                <input type="file" name="upload" id="setting-avatar-fileInput" accept=".jpg, .jpeg, .png" onchange="IsFileChoosen()" />
            </div>
            <input type="submit" class="btn btn-primary" value="Change" id="setting-avatar-submit" style="margin-top: 10px;" disabled/>
        </div>                
    }
</div>

<script type="text/javascript">
    function IsFileChoosen() {
        if (document.getElementById("setting-avatar-fileInput").files.length != 0) {
            $('#setting-avatar-submit').prop("disabled", false);
        }
        else {
            $('#setting-avatar-submit').prop("disabled", true);
        }
    }
</script>